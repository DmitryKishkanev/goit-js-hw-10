{"version":3,"file":"2-snackbar.js","sources":["../src/js/2-snackbar.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../css/2-snackbar.css';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  formCreateButton: document.querySelector('button[type=\"submit\"]'),\n  formClearButton: document.querySelector('button[type=\"button\"]'),\n};\n\n// Переменная для хранения localStorage ключа\nconst STORAGE_KEY = 'feedback-form-state';\n\n// Создаём объект с пустыми свойствами для записи данных и сохранения его в localStorage\nconst formData = {\n  delay: '',\n  state: '',\n};\n\n// Вешаем слушатели события\nrefs.formEl.addEventListener('input', onInput);\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.formClearButton.addEventListener('click', onFormClearButton);\n\n// Вызов функции записи данных в форму из localStorage и передача ему аргументом нашей формы\npopulateForm(refs.formEl);\n\nfunction onInput(evt) {\n  const { name, value } = evt.target;\n  formData[name] = value;\n\n  // Проверяем, есть ли хотябы одно поле, значение которого не пустое\n  const hasData = Object.values(formData).some(field => field !== '');\n\n  if (hasData) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n\n    refs.formCreateButton.classList.add('isActive');\n    refs.formClearButton.classList.add('isActive');\n  } else {\n    localStorage.removeItem(STORAGE_KEY);\n\n    refs.formCreateButton.classList.remove('isActive');\n    refs.formClearButton.classList.remove('isActive');\n    return;\n  }\n}\n\nfunction onFormClearButton() {\n  localStorage.removeItem(STORAGE_KEY);\n  refs.formEl.reset();\n  formData.delay = '';\n  formData.state = '';\n  refs.formCreateButton.classList.remove('isActive');\n  refs.formClearButton.classList.remove('isActive');\n}\n\n// Функция создания промиса в аргумены, которой передаём delay - время задержки setTimeout\nfunction makePromise(delay) {\n  return new Promise((res, rej) => {\n    setTimeout(() => {\n      if (formData.state === 'fulfilled') {\n        res(`✅ Fulfilled promise in ${delay}ms`);\n      } else {\n        rej(`❌ Rejected promise in ${delay}ms`);\n      }\n    }, delay);\n  });\n}\n\n// Функция - оброботчик слушателя события на форме\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  // Вызов функции промиса\n  makePromise(Number(formData.delay))\n    .then(message => {\n      iziToastOptions(`✅ Fulfilled promise in ${formData.delay}ms`, 'green');\n    })\n    .catch(message => {\n      iziToastOptions(`❌ Rejected promise in ${formData.delay}ms`, 'red');\n    })\n    .finally(() => {\n      localStorage.removeItem(STORAGE_KEY);\n      refs.formEl.reset();\n      formData.delay = '';\n      formData.state = '';\n      refs.formCreateButton.classList.remove('isActive');\n      refs.formClearButton.classList.remove('isActive');\n    });\n}\n\n// Функция записи данных в форму из localStorage\nfunction populateForm(form) {\n  const savedForm = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\n  if (savedForm) {\n    Object.keys(savedForm).forEach(key => {\n      if (form.elements[key]) {\n        form.elements[key].value = savedForm[key];\n        formData[key] = savedForm[key];\n      }\n    });\n\n    refs.formCreateButton.classList.add('isActive');\n    refs.formClearButton.classList.add('isActive');\n  }\n}\n\n// Опции подключенного через библиотеку alert\nfunction iziToastOptions(message, backgroundColor) {\n  return iziToast.show({\n    message,\n    messageColor: '#ffffff',\n    backgroundColor,\n    icon: 'fa-regular fa-circle-xmark',\n    iconColor: '#a22b2b',\n    position: 'topRight',\n  });\n}\n"],"names":["refs","STORAGE_KEY","formData","onInput","onFormSubmit","onFormClearButton","populateForm","evt","name","value","field","makePromise","delay","res","rej","message","iziToastOptions","form","savedForm","key","backgroundColor","iziToast"],"mappings":"oGAIA,MAAMA,EAAO,CACX,OAAQ,SAAS,cAAc,OAAO,EACtC,iBAAkB,SAAS,cAAc,uBAAuB,EAChE,gBAAiB,SAAS,cAAc,uBAAuB,CACjE,EAGMC,EAAc,sBAGdC,EAAW,CACf,MAAO,GACP,MAAO,EACT,EAGAF,EAAK,OAAO,iBAAiB,QAASG,CAAO,EAC7CH,EAAK,OAAO,iBAAiB,SAAUI,CAAY,EACnDJ,EAAK,gBAAgB,iBAAiB,QAASK,CAAiB,EAGhEC,EAAaN,EAAK,MAAM,EAExB,SAASG,EAAQI,EAAK,CACpB,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAUF,EAAI,OAM5B,GALAL,EAASM,CAAI,EAAIC,EAGD,OAAO,OAAOP,CAAQ,EAAE,KAAKQ,GAASA,IAAU,EAAE,EAGhE,aAAa,QAAQT,EAAa,KAAK,UAAUC,CAAQ,CAAC,EAE1DF,EAAK,iBAAiB,UAAU,IAAI,UAAU,EAC9CA,EAAK,gBAAgB,UAAU,IAAI,UAAU,MACxC,CACL,aAAa,WAAWC,CAAW,EAEnCD,EAAK,iBAAiB,UAAU,OAAO,UAAU,EACjDA,EAAK,gBAAgB,UAAU,OAAO,UAAU,EAChD,MACD,CACH,CAEA,SAASK,GAAoB,CAC3B,aAAa,WAAWJ,CAAW,EACnCD,EAAK,OAAO,QACZE,EAAS,MAAQ,GACjBA,EAAS,MAAQ,GACjBF,EAAK,iBAAiB,UAAU,OAAO,UAAU,EACjDA,EAAK,gBAAgB,UAAU,OAAO,UAAU,CAClD,CAGA,SAASW,EAAYC,EAAO,CAC1B,OAAO,IAAI,QAAQ,CAACC,EAAKC,IAAQ,CAC/B,WAAW,IAAM,CACXZ,EAAS,QAAU,YACrBW,EAAI,0BAA0BD,CAAK,IAAI,EAEvCE,EAAI,yBAAyBF,CAAK,IAAI,CAEzC,EAAEA,CAAK,CACZ,CAAG,CACH,CAGA,SAASR,EAAaG,EAAK,CACzBA,EAAI,eAAc,EAGlBI,EAAY,OAAOT,EAAS,KAAK,CAAC,EAC/B,KAAKa,GAAW,CACfC,EAAgB,0BAA0Bd,EAAS,KAAK,KAAM,OAAO,CAC3E,CAAK,EACA,MAAMa,GAAW,CAChBC,EAAgB,yBAAyBd,EAAS,KAAK,KAAM,KAAK,CACxE,CAAK,EACA,QAAQ,IAAM,CACb,aAAa,WAAWD,CAAW,EACnCD,EAAK,OAAO,QACZE,EAAS,MAAQ,GACjBA,EAAS,MAAQ,GACjBF,EAAK,iBAAiB,UAAU,OAAO,UAAU,EACjDA,EAAK,gBAAgB,UAAU,OAAO,UAAU,CACtD,CAAK,CACL,CAGA,SAASM,EAAaW,EAAM,CAC1B,MAAMC,EAAY,KAAK,MAAM,aAAa,QAAQjB,CAAW,CAAC,EAE1DiB,IACF,OAAO,KAAKA,CAAS,EAAE,QAAQC,GAAO,CAChCF,EAAK,SAASE,CAAG,IACnBF,EAAK,SAASE,CAAG,EAAE,MAAQD,EAAUC,CAAG,EACxCjB,EAASiB,CAAG,EAAID,EAAUC,CAAG,EAErC,CAAK,EAEDnB,EAAK,iBAAiB,UAAU,IAAI,UAAU,EAC9CA,EAAK,gBAAgB,UAAU,IAAI,UAAU,EAEjD,CAGA,SAASgB,EAAgBD,EAASK,EAAiB,CACjD,OAAOC,EAAS,KAAK,CACnB,QAAAN,EACA,aAAc,UACd,gBAAAK,EACA,KAAM,6BACN,UAAW,UACX,SAAU,UACd,CAAG,CACH"}